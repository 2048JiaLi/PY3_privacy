## 问：说说Python可变与不可变数据类型的区别？

## 答：Python中看可变与不可变数据类型，主要是看变量所指向的内存地址处的值是否会改变 。 

> Python 的六种标准数据类型：数字、字符串、列表、元组、字典、集合。

- **不可变数据（3个）**：Number（数字）、String（字符串）、Tuple（元组）。

- **可变数据（3个）**：List（列表）、Dictionary（字典）、Set（集合）。

![image](https://mmbiz.qpic.cn/mmbiz_png/IibUVnJ665WpzfSXe7dZCoicu1lE7gjSSvLDXUPhfkFndqvB3G3Q3zbfXoNykl08cvaCuqiao7t6nibNbcCXWClWhg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

### 区别
> 一切皆为对象，一切皆为对象的引用
1. 可变数据类型：**变量所指向的内存地址处的值是可以被改变的**

```
>>> a = [1, 2, 3]
>>> id(a)
41568816  
>>> a = [1, 2, 3]
>>> id(a)
41575088  
>>> a.append(4)
>>> id(a)
41575088  
>>> a += [2]
>>> id(a)
41575088  
>>> a
[1, 2, 3, 4, 2]
```

进行**两次a = [1, 2, 3]操作**，两次a引用的**地址值是不同的**，也就是说其实创建了两个不同的对象

> 所以对于可变数据类型来说，具有同样值的对象是不同的对象，即在内存中保存了多个同样值的对象，地址值不同

接着对列表进行添加操作，分别`a.append(4)`和`a += [2]`，发现这两个操作使得a引用的对象值变成了上面的最终结果，但是**a引用的地址依旧是41575088（没有改变）**，对a进行的操作不会改变a引用的地址值，只是在地址后面又扩充了新的地址，改变了地址里面存放的值。

> 所以可变数据类型的意思就是说**对一个变量进行操作时，其值是可变的，值的变化并不会引起新建对象，即地址是不会变的，只是地址中的内容变化了或者地址得到了扩充**。

![image](https://mmbiz.qpic.cn/mmbiz_png/IibUVnJ665WpzfSXe7dZCoicu1lE7gjSSvEba4QMa56vlnwFMQolFOFaHTOXPFib1I4C8KUcvibehiaicoKE0JHlUKxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

2. 不可变数据类型：**变量所指向的内存地址处的值是不可以被改变**
```
>>> x = 1  
>>> id(x)
31106520  
>>> y = 1  
>>> id(y)
31106520  
>>> x = 2  
>>> id(x)
31106508  
>>> y = 2  
>>> id(y)
31106508  
>>> z = y
>>> id(z)
31106508  
>>> x += 2  
>>> id(x)
31106484
```

先来看`x = 1`和`y = 1`两个操作的结果，从上面的输出可以看到**x和y在此时的地址值是一样的**，也就是说x和y其实是**引用了同一个对象**，也就是说内存中对于1只占用了一个地址，而不管有多少个引用指向了它，都只有一个地址值，只是有一个引用计数会记录指向这个地址的引用到底有几个而已。

当我们进行`x = 2`赋值时，发现**x的地址值变了**，虽然还是x这个引用，但是其地址值却变化了，后面的`y = 2`以及`z = y`，使得**x、y和z都引用了同一个对象**，即2，所以地址值都是一样的。

当x和y都被赋值2后，1这个对象已经没有引用指向它了，所以1这个对象占用的内存，即31106520地址要被“**垃圾回收**”，即1这个对象在内存中已经不存在了。最后，x进行了加2的操作，所以创建了新的对象4，x引用了这个新的对象，而不再引用2这个对象。

![image](https://mmbiz.qpic.cn/mmbiz_png/IibUVnJ665WpzfSXe7dZCoicu1lE7gjSSvalnOJqk979pndRP7E4D0TwyBaArf0uhnw1ibpSv3xnmU7J4RVHeLcJw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

> ### [总结](https://www.cnblogs.com/big-devil/p/7625898.html): python中的不可变数据类型，不允许变量的值发生变化，如果改变了变量的值，相当于是新建了一个对象，而对于相同的值的对象，在内存中则只有一个对象，内部会有一个引用计数来记录有多少个变量引用这个对象；可变数据类型，允许变量的值发生变化，即如果对变量进行append、+=等这种操作后，只是改变了变量的值，而不会新建一个对象，变量引用的对象的地址也不会变化，不过对于相同的值的不同对象，在内存中则会存在不同的对象，即每个对象都有自己的地址，相当于内存中对于同值的对象保存了多份，这里不存在引用计数，是实实在在的对象。